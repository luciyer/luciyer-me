{"componentChunkName":"component---src-templates-blog-post-js","path":"/soql-cheat-sheet","result":{"data":{"site":{"siteMetadata":{"title":"luciyer.me"}},"ghostPost":{"title":"SOQL Cheat Sheet","html":"<h3 id=\"introduction\">Introduction</h3><p>My Salesforce SOQL Cheat Sheet is a guide I created for myself and that I’d like to share with others. All the things I’m constantly forgetting in SOQL in one neat, tidy place!</p><p><em><em>This is a living document; I add to it as I find new things I’d like to remember, and it isn’t strictly SOQL – as you’ll see I show some examples of how to properly embed SOQL within Apex.</em></em></p><p>Here we go...</p><hr><h4 id=\"general-query-formatting\">General Query Formatting</h4><pre><code>SELECT FieldName FROM ObjectName [WHERE FieldName = 'FieldValue' ORDER BY FieldName DESC LIMIT 5]</code></pre><h4 id=\"dynamic-soql-as-a-string-using-database-query-\">Dynamic SOQL – as a String using Database.query()</h4><pre><code>String queryString = 'SELECT Id, FirstName, LastName FROM Lead WHERE CreatedDate = LAST_N_DAYS:7'; List&lt;Lead&gt; myLeads = Database.query(queryString);</code></pre><p><em><em>Remember, you can dynamically manipulate the string to change the query before it executes.</em></em></p><h4 id=\"assignment-to-list-in-apex\">Assignment to List in Apex</h4><pre><code>List&lt;ObjectName&gt; queryResults = [SELECT FieldName FROM ObjectName WHERE FieldName = 'FieldValue' ORDER BY FieldName DESC LIMIT 5];</code></pre><h4 id=\"directly-in-apex-for-loop\">Directly in Apex for loop</h4><pre><code>for (Custom_Object__c co: [SELECT Id, Name FROM Custom_Object__c WHERE CreatedDate = THIS_MONTH]) {\n    runSomeFunction(co); \n}</code></pre><h4 id=\"like-with-wildcard-\">LIKE with % (Wildcard)</h4><pre><code>SELECT Id FROM Lead WHERE Email LIKE '%@sfdc.guide'</code></pre><h4 id=\"in-with-static-values\">IN with Static Values</h4><pre><code>SELECT Id, Name FROM Account WHERE BillingState IN ('WA','OR','CA')</code></pre><h4 id=\"in-with-a-nested-query\">IN with a Nested Query</h4><pre><code>SELECT Id, Name FROM Opportunity WHERE AccountId IN (SELECT Id FROM Account WHERE Name = 'Zoom')</code></pre><h4 id=\"count-\">COUNT()</h4><pre><code>SELECT COUNT(Id) FROM Lead WHERE CreatedDate = THIS_MONTH</code></pre><h4 id=\"count_distinct-\">COUNT_DISTINCT()</h4><pre><code>SELECT COUNT_DISTINCT(Account.Name) FROM Opportunity WHERE CloseDate = LAST_MONTH</code></pre><h4 id=\"aggregate-results\">Aggregate Results</h4><pre><code>AggregateResult[] ar = [SELECT AVG(Amount) average FROM Opportunity];\n\nDecimal avgAmount = (Decimal)ar[0].get('average');\n\nSystem.debug(avgAmount);</code></pre><h4 id=\"date-literals\">Date Literals</h4><p><a href=\"https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_select_dateformats.htm\" rel=\"noopener noreferrer\">Full Documentation Here</a></p><pre><code>SELECT Id, Name, CreatedDate, LeadSource FROM Lead WHERE CreatedDate = [DATE_LITERAL]﻿</code></pre><p>Replace <strong><strong><code>[DATE_LITERAL]</code> </strong></strong>with one of the following values (this is a subset of the full list)…</p><p>TODAY, TOMORROW, YESTERDAY</p><p>LAST_WEEK, THIS_WEEK, NEXT_WEEK</p><p>THIS_QUARTER, THIS_YEAR, LAST_YEAR</p><p>LAST_N_WEEKS:2, LAST_N_MONTHS:6, LAST_N_YEARS:3</p><h4 id=\"having\">HAVING</h4><p>Since we can’t use <strong><strong><code>WHERE</code></strong></strong> with <strong><strong><code>GROUP BY</code> </strong></strong>and aggregate functions, but we can use <strong><strong><code>HAVING</code></strong></strong>, like so…</p><pre><code>SELECT Name, Count(Id) FROM Account GROUP BY Name HAVING Count(Id) &gt; 1</code></pre><p><em><em>The above is a query which returns accounts with duplicate names. I think I stole it from somewhere else. That’s why it’s called a cheat sheet.</em></em></p>","published_at":"June 05, 2018","tags":[{"name":"salesforce","slug":"salesforce"}]}},"pageContext":{"slug":"soql-cheat-sheet","previous":{"slug":"letterheads-email-templates-and-email-alerts","title":"Letterheads, Email Templates, and Email Alerts","primary_tag":{"name":"salesforce","slug":"salesforce"}},"next":{"slug":"formula-fields-and-cross-object-formula-fields","title":"Formula Fields and Cross-Object Formula Fields","primary_tag":{"name":"salesforce","slug":"salesforce"}}}}}